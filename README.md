# TelicInfant
A Matlab Psychtoolbox experiment for displaying stimuli. Part of the Telic series of experiments. This experiment is written for Prof. Susan Hespos' [Infant Cognition Lab](http://sites.northwestern.edu/infantcognitionlab/). It uses the [Psychtoolbox Package](http://psychtoolbox.org/), as well as the Psychtoolbox tutorials written by [Peter Scarfe](http://peterscarfe.com/ptbtutorials.html).

The experiment is currently in development.

## How to run

To run the experiment, download the files from this repository. Open the Matlab program. Use the command window to navigate to the folder containing the downloaded files. 

If you're unfamiliar with the command windows, you can use the `ls` command to see the directories and files in your current location, and the `cd directory_name` command to move into a directory, or `cd ..` to move from your current directory to the parent of that directory. Imagine each `cd` command is opening another window in your Finder/Explorer to see the next folder.

Once you've navigated to the directory containing the files, run the `generateParameters` command to generate csv files containing the parameters, and the `TelicInfant` command to run the program. A brief introduction screen will display before the experiment starts.

## The Experiment

This experiment displays stimuli for the Telic experiments. The screen will be split into three sections. The middle section is reserved for an attention-grabber. The left and right sides are used to display two sets of stimuli. Both stimuli are based on drawing a series of ellipses, or animating a star to progress along a path of those ellipses. The ellipses are split apart, spatially if drawn and temporally (by a pause in movement) is animated. This split is either natural (evenly spaced) or unnatural (randomly spaced).

See the image below for four examples of the stimuli. Starting at the upper left and going clockwise:

1) The left side contains four ellipses at a normal scale assigned randomly to a 4x5 grid, and the right side contains eight ellipses at half-size on the same 4x5 grid.

2) The left side contains four ellipses at double scale assigned randomly to a 2x4 grid, and the right side contains eight ellipses at a normal scale on the same 4x5 grid. 

3) The left side contains four ellipses at a normal scale assigned randomly to a 4x5 grid, and the right side contains eight ellipses at a normal scale on the same 4x5 grid.

4) The left side contains four ellipses at double scale assigned randomly to a 2x4 grid, and the right side contains eight ellipses at half-size on the same 4x5 grid. 

![alt text](https://farm5.staticflickr.com/4354/36367418100_7811cac8b9.jpg "Four examples of the stimuli, displaying stimuli drawn on each of two gray backgrounds on the right and left sides of the screen, with a blank black background dividing them. The contents are described in the bulletpoint above.")

Currently, the experiment has two sets of two conditions (for a total of four combinations): Events and Objects, and Equal (natural, evenly-spaced) and Random breaks. The image above displays the object condition with natural breaks. In the events stimuli, the ellipses are arranged fanning from the origin, in a flower-like shape, with each ellipse acting as a "petal." The object condition's unnatural objects take that flower-like arrangement, draw it out, then split it into four or eight random pieces and place those pieces on the grids used for the natural object condition.

## Current Progress

The experiment currently only runs a single trial upon the script's start. The parameters must be changed manually. The official structure of the experiment will be implemented when the design is finalized.

The code also lacks finalizing comments and cleaning to denote purpose and progression. These will also be written when the design is finalized to ensure clarity of code. Most functions have their purpose written in a comment above their definition.

## Code Progression and Programming Design
The code is split into functions, each named for its purpose. The runObjectTrial and runEventsTrials are the most important, as they progress into other functions to create the experiment. Many of the functions are written to perform tasks that may be performed in future iterations of the Telic experiment series, so that the functions can be reused or rearranged.

Additionally, hash maps (used to map names to variables and store that information in one variable) are used to pass information from function to function. This is to for code clarity, and to avoid the need to pass a lengthy list of arguments in a particular order from function to function. These maps are created in the runSetup function.

The stimuli are generated by creating a set of x-y coordinates corresponding to an ellipse. Each stimuli set contains many sets of ellipse points put together, rotated, and transposed according to the conditions. 

In the object condition, the script cycles through each point and draws a line between it and the next. Points are skipped near breaks and the end of the points list to avoid drawing lines between ellipses or to the origin. A random position on the generated 4x5 grid is used to transpose each object piece to the right spot. I've used a 2x4 grid for the double-scale objects to ensure that they all fit on the screen without overlapping, which would interfere with the stimuli being perceived as a set of distinct objects.

In the event condition, the script generates the set of coordinates, arranges them in the flower-like shape, then cycles through the set of points and draws a series of frames. The star image (see the .png file in the repository) is drawn at each x-y coordinate set, erased, and drawn at the next. Similar to a 2D or flip-book animation, this animates the star progressing along the path of the ellipses.